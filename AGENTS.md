# AI Agent Guide for thai-lint

**Purpose**: Primary entry point for AI agents working on this project

**Quick Start**: Read `.ai/docs/PROJECT_CONTEXT.md` for full context, then check `.ai/index.yaml` for navigation.

---

## Project Overview

The AI Linter - Lint and governance for AI-generated code across multiple languages. Identifies common mistakes, anti-patterns, and security issues in code generated by AI assistants.

**Type**: cli (Python CLI application)
**Status**: in-development

## Navigation

### Critical Documents
- **Project Context**: `.ai/docs/PROJECT_CONTEXT.md` - Architecture and philosophy
- **Index**: `.ai/index.yaml` - Repository structure and navigation
- **Layout**: `.ai/layout.yaml` - Directory organization

### How-To Guides
See `.ai/howto/` for step-by-step guides on common tasks.

### Templates
See `.ai/templates/` for reusable file templates and boilerplate.

## Roadmap-Driven Development

### When User Requests Planning

If the user says any of the following:
- "I want to plan out..."
- "I want to roadmap..."
- "Create a roadmap for..."
- "Plan the implementation of..."
- "Break down the feature..."

**Your Actions**:
1. **Read** `.ai/howtos/how-to-roadmap.md` for roadmap workflow guidance
2. **Use templates** from `.ai/templates/roadmap-*.md.template`
3. **Create roadmap** in `.roadmap/planning/[feature-name]/`
4. **Follow** the three-document structure:
   - PROGRESS_TRACKER.md (required - primary handoff document)
   - PR_BREAKDOWN.md (required for multi-PR features)
   - AI_CONTEXT.md (optional - architectural context)

### When User Requests Continuation

If the user says any of the following:
- "I want to continue with..."
- "Continue the roadmap for..."
- "What's next in..."
- "Resume work on..."

**Your Actions**:
1. **Check** `.roadmap/in-progress/` for active roadmaps
2. **Read** the roadmap's `PROGRESS_TRACKER.md` FIRST
3. **READ** `.ai/docs/FILE_HEADER_STANDARDS.md` for header templates
4. **Follow** the "Next PR to Implement" section
5. **Update** PROGRESS_TRACKER.md after completing each PR

**BEFORE Writing Any Files**:
- ‚úÖ Check `.ai/docs/FILE_HEADER_STANDARDS.md` for correct header template
- ‚úÖ Use template matching file type (Python: lines 131-151, YAML: lines 177-193, etc.)
- ‚úÖ Include ALL mandatory fields: Purpose, Scope, Overview, Dependencies, Exports, Interfaces, Implementation
- ‚úÖ Use atemporal language (no "currently", "now", "new", "old", dates, or temporal references)

### Roadmap Lifecycle

```
planning/ ‚Üí in-progress/ ‚Üí complete/
   ‚Üì             ‚Üì              ‚Üì
Created      Implementing    Archived
```

See `.ai/howtos/how-to-roadmap.md` for detailed workflow instructions.

## Development Guidelines

### Code Style
Python code follows PEP 8 style guide (enforced by Ruff linter).
- Use type hints (checked by MyPy)
- Docstrings required for all public functions (Google-style)
- Maximum cyclomatic complexity: B (enforced by Xenon)

### File Organization
See `.ai/layout.yaml` for the canonical directory structure.

**Key Directories**:
- Source code: `src/`
- Tests: `tests/`
- Documentation: `docs/`

### Documentation Standards

**MANDATORY: File Headers Before Writing Any Code**

All code files MUST have comprehensive headers following `.ai/docs/FILE_HEADER_STANDARDS.md`:

**Required Process**:
1. ‚úÖ **READ** `.ai/docs/FILE_HEADER_STANDARDS.md` BEFORE writing any files
2. ‚úÖ **SELECT** correct template for file type:
   - Python (.py): Lines 131-151
   - TypeScript/JavaScript (.ts, .tsx, .js, .jsx): Lines 154-174
   - YAML/Config (.yml, .yaml): Lines 177-193
   - Markdown (.md): Lines 75-102
3. ‚úÖ **INCLUDE** all mandatory fields:
   - Purpose: Brief description (1-2 lines)
   - Scope: What areas/components this file covers
   - Overview: Comprehensive summary (3-5 sentences minimum)
   - Dependencies: Key dependencies or related files
   - Exports: Main classes, functions, or constants provided
   - Interfaces: Key APIs or methods exposed
   - Implementation: Notable patterns or architectural decisions
4. ‚úÖ **USE** atemporal language (no "currently", "now", "new", "old", dates)

**Validation**: Header linter runs in CI/CD and will block PRs with missing/incorrect headers.

See `.ai/docs/FILE_HEADER_STANDARDS.md` for complete templates and examples.

## Build and Test Commands

### Development
```bash
# Install dependencies
make install

# Run linter (fast - for development)
make lint

# Run CLI help
python -m src.cli --help
```

### Testing
```bash
# Run tests
make test

# Run tests with coverage
make test-coverage
```

### Linting
```bash
# Fast linting (Ruff only)
make lint

# Comprehensive linting (all linters + type checking)
make lint-all

# Security scanning
make lint-security

# Complexity analysis
make lint-complexity

# ALL quality checks
make lint-full
```

### Formatting
```bash
# Auto-fix formatting and linting issues
make format
```

### Building
```bash
# Build Docker container
docker compose build

# Run CLI in container
docker compose run cli --help
```

## Git Workflow

### Commit Messages
Follow conventional commits format:
```
type(scope): Brief description

Detailed description if needed.

ü§ñ Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude <noreply@anthropic.com>
```

Types: `feat`, `fix`, `docs`, `style`, `refactor`, `test`, `chore`

### Branch Strategy
- `main` - Production-ready code
- `feature/*` - New features
- `fix/*` - Bug fixes

### Before Committing
- [ ] All tests pass (`make test` exits with code 0)
- [ ] Code is linted (`make lint-full` exits with code 0)
- [ ] **All files have proper headers per `.ai/docs/FILE_HEADER_STANDARDS.md`**
- [ ] Documentation updated
- [ ] No secrets committed (pre-commit hooks check this)

### Quality Gates - CRITICAL

**NEVER claim linting is clean unless ALL of these are true:**

1. ‚úÖ `make lint` exits with **code 0** (not just "no Ruff errors")
2. ‚úÖ `make lint-full` exits with **code 0** (not just "9.95/10 score")
3. ‚úÖ **ZERO Pylint violations** - do NOT dismiss them as "acceptable" or "design choices"
4. ‚úÖ **ZERO test failures** - failing tests mean the feature is broken

**Common Mistakes to Avoid:**
- ‚ùå Running `make lint` (fast) and claiming full linting is clean
- ‚ùå Seeing Pylint violations and dismissing them without fixing
- ‚ùå Claiming "linting is clean" when `make lint-full` has non-zero exit code
- ‚ùå Ignoring the exit code and only looking at output text
- ‚ùå Saying "acceptable for CLI complexity" when Pylint fails - the limits exist for a reason

**Correct Validation Process:**
```bash
# Step 1: Run full linting
make lint-full
# Check exit code: echo $? should be 0

# Step 2: Run tests
make test
# Check exit code: echo $? should be 0

# Step 3: Only if BOTH exit with 0, then linting is clean
```

**If Pylint fails:** You MUST either:
1. Refactor the code to meet the limits (preferred), OR
2. Add explicit `# pylint: disable=rule-name` with detailed justification comment

**Never** claim quality checks pass when they don't. The user depends on accurate status.

## Security Considerations

- Never commit secrets or credentials
- Secrets should be in `.env` (gitignored)
- Validate user input
- Security scanning runs automatically (Bandit, Safety, Gitleaks)
- Run `make lint-security` before PRs

## Common Tasks

### Adding a New Feature
1. Check `.ai/features/` for existing feature documentation
2. Create feature branch: `git checkout -b feature/your-feature`
3. Implement feature following code style guidelines
4. Add tests in `tests/`
5. Update documentation
6. Run quality checks: `make lint-full`
7. Submit PR

### Adding a New CLI Command
See `.ai/howto/python-cli/how-to-add-cli-command.md`

### Adding a New Linter
1. Create linter module in `src/linters/`
2. Implement linter class with common interface
3. Add tests in `tests/test_linters/`
4. Register linter in CLI
5. Document linter rules

### Debugging
1. Check logs (configured in `src/cli.py`)
2. Run tests with verbose output: `pytest -v -s`
3. Use Python debugger: `python -m pdb -m src.cli`

## Resources

### Documentation
- CLI Architecture: `.ai/docs/python-cli/`
- How-to guides: `.ai/howtos/python-cli/`

### External Dependencies
See `pyproject.toml` for the complete and authoritative list of Python dependencies managed by Poetry.

## Getting Help

### When Stuck
1. Check `.ai/docs/` for context and architecture
2. Review `.ai/howto/` for guides
3. Check existing code for patterns
4. Review git history for similar changes
5. Read roadmap: `.roadmap/python-cli-install/`

### Project Roadmap
The installation is managed via roadmap at `.roadmap/python-cli-install/`:
- **PROGRESS_TRACKER.md** - Current status and next PR
- **PR_BREAKDOWN.md** - Detailed implementation steps
- **AI_CONTEXT.md** - Installation context

---

**Note**: This file is generated by ai-projen's ai-folder plugin. It will be extended by subsequent plugins (Python, Docker, CI/CD, etc.) as they are installed.

<!--
PLUGIN EXTENSION MARKERS
Plugins can add content between these markers:

### LANGUAGE_SPECIFIC_GUIDELINES
Language plugins add their specific conventions here.
### END_LANGUAGE_SPECIFIC_GUIDELINES

### INFRASTRUCTURE_COMMANDS
Infrastructure plugins add deployment/ops commands here.
### END_INFRASTRUCTURE_COMMANDS

### STANDARDS_CHECKLIST
Standards plugins add compliance checklists here.
### END_STANDARDS_CHECKLIST
-->
